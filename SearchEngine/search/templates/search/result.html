<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Glass UI - Glassmorphism UI Kit">
    <meta name="author" content="kingstudio.ro">
    <!-- Favicon -->
    <link rel="icon" href="../../static/search/images/favicon.png">
    <!-- Site Title -->
    <title>WikiLaw</title>
    <!-- Bootstrap 5 Core CSS -->
    <link href="../../static/search/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="../../static/search/css/animate.min.css">
    <link rel="stylesheet" href="../../static/search/css/aos.css">
    <link rel="stylesheet" href="../../static/search/css/style.css">
    <!-- Fonts -->
    <link rel="stylesheet" href="../../static/search/css/fontawesome-all.min.css" type="text/css">
</head>

<body class="bg-img bg-fixed" style="background-image: url(../../static/search/images/blur-light.jpg)">
    <div id="loader-wrapper">
        <div id="loader"></div>
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>

    <!-- dark-split-header -->
    <nav class="navbar navbar-expand-lg secondary-nav snav-left navbar-light bg-white-frosted z-index-0">
        <div class="collapse navbar-collapse" id="navbar-toggle-snav-left">
            <nav class="navbar navbar-expand-lg navbar-light bg-transparent absolute top-0 left-0 right-0">
                <div class="container mt-15">
                    <a class="navbar-brand" href="/"><img src="../../static/search/images/logo0.png" alt="" style="max-width: 320px; max-height: 64px"></a>
                    <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-7" aria-controls="navbar-7" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="icon-bar top-bar"></span>
                        <span class="icon-bar middle-bar"></span>
                        <span class="icon-bar bottom-bar"></span>
                        <span class="sr-only">Toggle navigation</span>
                    </button><!-- / navbar-toggler -->

                    <div class="collapse navbar-collapse" id="navbar-7">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link active" href="/"><span><i class="fas fa-home mr-5"></i> Home</span></a>
                            </li><!-- / nav-item -->
                            <li class="nav-item">
                                <a class="nav-link" onclick="showAdvancedSearch()"><span><i class="fas fa-th-large mr-5"></i> Advanced search</span></a>
                            </li><!-- / nav-item -->
                            <li class="nav-item">
                                <a class="nav-link" onclick="showUploadCase()"><span><i class="fas fa-pencil-ruler mr-5"></i> Upload case</span></a>
                            </li><!-- / nav-item -->
                            <li class="nav-item">
                                <a class="nav-link last-menu-item" href="/about/"><span><i class="fas fa-user mr-5"></i> About</span></a>
                            </li><!-- / nav-item -->
                        </ul><!-- / navbar-nav -->
                    </div><!-- / navbar-collapse -->
                </div><!-- / container -->
            </nav><!-- / navbar -->

            <div class="container mt-25">
                <form action="" method="GET">
                    <div class="input-group input-w-overlap-btn mb-0 mt-30">
                        <input type="text" name="query" class="form-control pill m-y-30" placeholder="Search..." required="">
                        <span class="input-group-btn">
                            <button class="btn btn-sm btn-primary btn-icon overlapping-btn btn-circle" type="submit">
                                <i class="fas fa-search"></i>
                            </button>
                        </span><!-- / input-group-btn -->
                    </div><!-- / input-group -->
                </form>
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        {% if sort_key == '' %}
                            <a class="nav-link active" href="?query={{ query }}&current_page={{ current_page }}"> Accuracy</a>
                        {% else %}
                            <a class="nav-link" href="?query={{ query }}&current_page={{ current_page }}"> Accuracy</a>
                        {% endif %}
                    </li>
                    <li class="nav-item">
                        {% if sort_key == 'filing_time' %}
                            <a class="nav-link active" href="?query={{ query }}&current_page={{ current_page }}&sort_key=filing_time"> Time</a>
                        {% else %}
                            <a class="nav-link" href="?query={{ query }}&current_page={{ current_page }}&sort_key=filing_time"> Time</a>
                        {% endif %}
                    </li>
                    <li class="nav-item">
                        {% if sort_key == 'browse_count' %}
                            <a class="nav-link active" href="?query={{ query }}&current_page={{ current_page }}&sort_key=browse_count"> Hot</a>
                        {% else %}
                            <a class="nav-link" href="?query={{ query }}&current_page={{ current_page }}&sort_key=browse_count"> Hot</a>
                        {% endif %}
                    </li>
                </ul><!-- / navbar-nav -->
            </div><!-- / container -->
      </div><!-- / navbar-collapse -->
  </nav><!-- / navbar -->

    <!-- Advanced search -->
    <div id="advancedSearch" class="widget position-absolute top-100 left-200 right-200" style="display: none; z-index: 99">
        <div class="toast-header mb-25">
            <strong class="me-auto">Advanced search</strong>
            <button type="button" class="btn-close" onclick="hideAdvancedSearch()"></button>
        </div><!-- / toast-header -->
        <form action="" method="GET">
            <div class="form-group">
                <input type="text" class="form-control" name="keyword" placeholder="Keyword" required="">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="text" class="form-control" name="case_id" placeholder="Case ID">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="number" class="form-control" name="filing_time" placeholder="Filing Time">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="text" class="form-control" name="law" placeholder="Law">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="text" class="form-control" name="law_detailed" placeholder="Law Detailed">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="text" class="form-control" name="crime" placeholder="Crime">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="text" class="form-control" name="judge" placeholder="Judge">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="text" class="form-control" name="court" placeholder="Court">
            </div><!-- / form-group -->
            <div class="form-group">
                <input type="text" class="form-control" name="document_type" placeholder="Document Type">
            </div><!-- / form-group -->
            <button type="submit" class="btn btn-primary btn-submit">Search</button>
        </form><!-- / form-group -->
    </div>
    <script>
        function showAdvancedSearch() {
            document.getElementById('advancedSearch').style.display = 'block';
        }
        function hideAdvancedSearch() {
            document.getElementById('advancedSearch').style.display = 'none';
        }
    </script>
    <!-- / Advanced search -->

    <!-- Upload case -->
    <div id="uploadCase" class="widget position-absolute top-200 left-200 right-200" style="display: none; z-index: 99">
        <div class="toast-header mb-25">
            <strong class="me-auto">Upload case</strong>
            <button type="button" class="btn-close" onclick="hideUploadCase()"></button>
        </div><!-- / toast-header -->
        <form action="" method="GET">
            <div class="form-group">
                <textarea class="form-control" name="case_content" rows="5" placeholder="Case Content" required=""></textarea>
            </div><!-- / form-group -->
            <button type="submit" class="btn btn-primary btn-submit">Upload</button>
        </form><!-- / form-group -->
    </div>
    <script>
        function showUploadCase() {
            document.getElementById('uploadCase').style.display = 'block';
        }
        function hideUploadCase() {
            document.getElementById('uploadCase').style.display = 'none';
        }
    </script>
    <!-- / Upload case -->

    {% if results %}
    <div class="container mt-25">
        {% for result in results %}
        <a href="{%url 'detail' %}?id={{ result.id }}">
            <div class="promo-box promo-left" data-aos="fade-up">
                <div class="promo-container">
                    <i class="bi bi-bootstrap promo-icon d-block mb-25 text-primary"></i>
                    <h6 class="box-title mb-15">{{ result.case_id }}</h6>
                    <p className="box-description" id="{{ result.case_id }}"></p>
                    <script>
                        highlight = '{{ result.highlight }}'
                        highlight = highlight.replace('[', '').replace(']', '')
                            .replaceAll('&lt;em&gt;', '<span class="text-primary">').replaceAll('&lt;/em&gt;', '</span>')
                        console.log(highlight)
                        document.getElementById('{{ result.case_id }}').innerHTML = highlight
                    </script>
                </div><!-- / promo-container -->
            </div><!-- / promo-box -->
        </a>
        {% endfor %}
        <nav aria-label="pagination-center" data-aos="fade-up">
            <ul class="pagination pill-pagination justify-content-center">
                {% if current_page != 1 %}
                    <li class="page-item"><a class="page-link" href="?query={{ query }}&current_page={{ prev_page }}"><i class="fas fa-chevron-left mb-5"></i></a></li>
                {% else %}
                    <li class="page-item disabled"><a class="page-link" href="?query={{ query }}&current_page={{ prev_page }}"><i class="fas fa-chevron-left mb-5"></i></a></li>
                {% endif %}
                {% for i in page_num %}
                    {% if current_page == i %}
                        {% if query %}
                            <li class="page-item active"><a class="page-link" href="?query={{ query }}&current_page={{ i }}">{{ i }}</a></li>
                        {% elif keyword %}
                            <li class="page-item active"><a class="page-link" href="?query={{ keyword }}&current_page={{ i }}">{{ i }}</a></li>
                        {% else %}
                            <li class="page-item active"><a class="page-link" href="?query={{ case_content }}&current_page={{ i }}">{{ i }}</a></li>
                        {% endif %}
                    {% else %}
                        {% if query %}
                            <li class="page-item"><a class="page-link" href="?query={{ query }}&current_page={{ i }}">{{ i }}</a></li>
                        {% elif keyword %}
                            <li class="page-item"><a class="page-link" href="?query={{ keyword }}&current_page={{ i }}">{{ i }}</a></li>
                        {% else %}
                            <li class="page-item"><a class="page-link" href="?query={{ case_content }}&current_page={{ i }}">{{ i }}</a></li>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                {% if current_page != last_page %}
                    <li class="page-item"><a class="page-link" href="?query={{ query }}&current_page={{ next_page }}"><i class="fas fa-chevron-right mb-5"></i></a></li>
                {% else %}
                    <li class="page-item disabled"><a class="page-link" href="?query={{ query }}&current_page={{ next_page }}"><i class="fas fa-chevron-right mb-5"></i></a></li>
                {% endif %}
            </ul>
        </nav><!-- / pagination-center -->
    </div><!-- / container -->
    {% else %}
        <p class="text-center lead m-10">Sorry, no results.</p>
    {% endif %}

    <!-- Core JavaScript -->
    <script src="../../static/search/js/bootstrap.bundle.min.js"></script>
    <script src="../../static/search/js/theme.js"></script>
    <!-- / Core JavaScript -->

    <!-- aos -->
    <script src="../../static/search/js/aos.js"></script>
    <script>
        AOS.init({
          duration: 1200,
        })
    </script>
    <!-- / aos -->

    <!-- Jarallax -->
    <script src="../../static/search/js/jarallax.min.js"></script>
    <!-- / Jarallax -->

    <footer class="bg-white">
        <div class="container">
            <div class="row v-center mobile-center">
                <div class="col-md-4 footer-left-area tablet-top">
                    <p>© 2022 Wiki Law by Victor Wang & Firman Luo</a></p>
                </div><!-- / footer-left-area -->
               <div class="col-md-8 footer-right-area">
                    <p class="footer-social">
                        <a class="btn btn-xs btn-icon btn-circle btn-primary mr-10"><i class="fab fa-github"></i></a>
                        <a class="btn btn-xs btn-icon btn-circle btn-primary mr-10"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-xs btn-icon btn-circle btn-primary"><i class="fab fa-facebook-f"></i></a>
                    </p><!-- / footer-social -->
                </div><!-- / footer-right-area -->
            </div><!-- / row -->
        </div><!-- / container -->
    </footer>
</body>
</html>
